<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Template para QR Card usando servicio externo -->
        <template id="print_qr_overlay_js_card">
            <t t-set="doc" t-value="doc.with_context({'lang':doc.create_uid.lang})" />
            <div class="page" style="position:absolute; top:-40; left:0;">
                <div style="display: inherit;margin:auto;text-align: center;">
                    <img t-if="doc.company_id.logo" 
                         t-att-src="'data:image/png;base64,%s' % to_text(doc.company_id.logo)" 
                         style="max-height:30px;"/>
                </div>
                <div style="display: inherit;margin:auto;text-align: center;padding-top:5px;">
                    <!-- QR generado usando servicio externo -->
                    <img t-att-src="'https://api.qrserver.com/v1/create-qr-code/?size=' + str(h) + 'x' + str(w) + '&amp;data=' + xurldownload"/>
                </div>
            </div>
        </template>

        <template id="report_qrcode_overlay_js_card">
            <t t-call="web.basic_layout">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="custom_certifica_portal.print_qr_overlay_js_card" />
                </t>
            </t>
        </template>

        <report
                id="print_qr_overlay_js_card_report"
                menu="False"
                string="QR Card (Servicio Externo)"
                model="informes.encuestas.merge"
                report_type="qweb-pdf"
                file="custom_certifica_portal.report_qrcode_overlay_js_card"
                name="custom_certifica_portal.report_qrcode_overlay_js_card"
                print_report_name="'QR-Card - %s' % (object.codigocliente or 'Sin-Codigo')" />

    </data>
</odoo>